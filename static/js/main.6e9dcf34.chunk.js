(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{16:function(e,t,a){e.exports={Image:"ImageGalleryItem_Image__3YXvD",Item:"ImageGalleryItem_Item__WGOL6"}},17:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2AxMb",Modal:"Modal_Modal__2WBTT"}},28:function(e,t,a){e.exports={List:"ImageGallery_List__138t9"}},29:function(e,t,a){e.exports={Btn:"Button_Btn__3Jv1l"}},31:function(e,t,a){e.exports={Load:"Loader_Load__3dI7_"}},33:function(e,t,a){e.exports={Message:"SearchImages_Message__1tRFk"}},38:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(11),c=a.n(o),s=(a(38),a(14)),i=a.n(s),l=a(18),u=a(27),h=a(4),m=a(5),d=a(7),p=a(6),b=a(15),j=a(12),g=a(8),f=a.n(g),O={type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"query",required:!0},v=a(0),y=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.query.trim()&&(e.props.onSubmit(e.state.query),e.setState({query:""}))},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value,o=a.type,c=a.checked,s="checkbox"===o||"radio"===o?c:r;e.setState(Object(j.a)({},n,s))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state.query,t=this.handleSubmit,a=this.handleChange;return Object(v.jsx)("header",{className:f.a.Searchbar,children:Object(v.jsxs)("form",{onSubmit:t,className:f.a.SearchForm,children:[Object(v.jsx)("button",{type:"submit",className:f.a.SearchFormButton,children:Object(v.jsx)("span",{className:f.a.SearchFormButtonLabel})}),Object(v.jsx)("input",Object(b.a)(Object(b.a)({},O),{},{className:f.a.SearchFormInput,value:e,onChange:a}))]})})}}]),a}(n.Component),_=a(16),x=a.n(_),S=function(e){var t=e.pageUrl,a=e.largeUrl,n=e.tags,r=e.onPictureOpen;return Object(v.jsx)("li",{className:x.a.Item,onClick:function(){r(a)},children:Object(v.jsx)("img",{src:t,alt:n,className:x.a.Image})})},k=a(28),w=a.n(k),L=function(e){var t=e.list,a=e.onPictureOpen,n=t.map((function(e){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(S,{pageUrl:e.webformatURL,largeUrl:e.largeImageURL,tags:e.tags,onPictureOpen:a},e.id)})}));return Object(v.jsx)("ul",{className:w.a.List,children:n})},F=L;L.defaultProps={onPictureOpen:function(){}};var I=a(29),M=a.n(I),B=function(e){var t=e.onClick;return Object(v.jsx)("button",{onClick:t,type:"button",className:M.a.Btn,children:"Load more"})},C=a(30),q=a.n(C),N=a(31),U=a.n(N),P=function(){return Object(v.jsx)(q.a,{className:U.a.Load,type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})},E=a(17),G=a.n(E),R=document.querySelector("#modal-root"),A=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onEsc=function(t){"Escape"===t.code&&e.props.onClose()},e.onBackdrop=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onEsc)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onEsc)}},{key:"render",value:function(){var e=this.props.children;return Object(o.createPortal)(Object(v.jsx)("div",{className:G.a.Overlay,onClick:this.onBackdrop,children:Object(v.jsx)("div",{className:G.a.Modal,children:e})}),R)}}]),a}(n.Component),D=a(32),T=a.n(D),W="https://pixabay.com/api/",H="23365989-0313fa8d36a360eb60645d2f6",J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return T.a.get("".concat(W,"?q=").concat(e,"&page=").concat(t,"&key=").concat(H,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.data}))},z=a(33),Q=a.n(z),V=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={list:[],page:1,loading:!1,error:null,query:"",total:0,largeImageURL:"",showModal:!1},e.searchFormSubmit=function(t){e.setState({query:t,loading:!0,page:1})},e.makeGallery=Object(u.a)(i.a.mark((function t(){var a,n,r,o,c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.query,r=a.page,t.prev=1,t.next=4,J(n,r);case 4:o=t.sent,c=o.hits,s=o.total,e.setState((function(e){var t=e.list,a=e.page;return{list:[].concat(Object(l.a)(t),Object(l.a)(c)),page:a+1,total:s,isLoading:!1}})),1!==r&&e.scroll(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.setState({error:t.t0,isLoading:!1});case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.scroll=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.showBtnLoadMore=function(){return Math.ceil(e.state.total/12)!==e.state.page-1},e.onPictureOpen=function(t){e.setState({largeImageURL:t,showModal:!0})},e.changeModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(e,t){if(t.query!==this.state.query)return this.setState({list:[],isLoading:!0}),void this.makeGallery()}},{key:"render",value:function(){var e=this.state,t=e.list,a=e.total,n=e.isLoading,r=e.showModal,o=e.largeImageURL,c=this.searchFormSubmit,s=this.makeGallery,i=this.onPictureOpen,l=this.changeModal;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(y,{onSubmit:c}),!a&&Object(v.jsx)("p",{className:Q.a.Message,children:"There are no pictures!"}),Boolean(t.length)&&Object(v.jsx)(F,{list:t,onPictureOpen:i}),n&&Object(v.jsx)(P,{}),r&&Object(v.jsx)(A,{onClose:l,children:Object(v.jsx)("img",{src:o})}),this.showBtnLoadMore()&&a&&Object(v.jsx)(B,{onClick:s})]})}}]),a}(n.Component);var X=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(V,{})})};c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(X,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__DjWH3",SearchForm:"Searchbar_SearchForm__1ac2l",SearchFormButton:"Searchbar_SearchFormButton__21S85","SearchFormButton-label":"Searchbar_SearchFormButton-label__2QH50",SearchFormInput:"Searchbar_SearchFormInput__VhsfU"}}},[[79,1,2]]]);
//# sourceMappingURL=main.6e9dcf34.chunk.js.map